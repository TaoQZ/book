# 进阶

## 安全

```shell
# 查看是否设置密码
CONFIG get requirepass
# 设置密码
CONFIG set requirepass "password"
# 使用密码登录
AUTH password
```

```shell
# 获取所有配置项
CONFIG GET *
# 查看当前客户端配置
info 
```



## 持久化

分为RDB和AOF两种持久化方式

### RDB

使用以下两条命令后会在指定的文件夹中生成指定文件名称的文件用于数据持久化

```shell
# 立刻执行
save 
# 后台执行
bgsave
```

#### 注意事项

save指令的执行会阻塞当前Redis服务器,知道当前RDB完成为止,有可能造成长时间阻塞

![image-20200705172902465](assets/image-20200705172902465.png)

![image-20200705173000676](assets/image-20200705173000676.png)



### AOF

使用日志的方式存储,通过配置开自动开启,记录的是执行的命令,可以通过重写的方式缩小文件大小

![image-20200705173243768](assets/image-20200705173243768.png)

![image-20200705173550660](assets/image-20200705173550660.png)

![image-20200705174002918](assets/image-20200705174002918.png)

![image-20200705173528654](assets/image-20200705173528654.png)

![image-20200705174140561](assets/image-20200705174140561.png)

![image-20200705174201449](assets/image-20200705174201449.png)

![image-20200705174237401](assets/image-20200705174237401.png)

![image-20200705174941890](assets/image-20200705174941890.png)



### RDB和AOF持久化的比较

![image-20200705175234102](assets/image-20200705175234102.png)



![image-20200705175352579](assets/image-20200705175352579.png)



## 事务

![image-20200705180435987](assets/image-20200705180435987.png)

取消事务

不会针对某个事务,执行命令后会清除存在的所有事务

```
discard
```

![image-20200705181428269](assets/image-20200705181428269.png)

### 事务锁

![image-20200705181645189](assets/image-20200705181645189.png)

watch必须在事务前执行

![image-20200705182118708](assets/image-20200705182118708.png)

### 解决死锁问题

![image-20200705182508936](assets/image-20200705182508936.png)



## 删除策略

![image-20200705192650901](assets/image-20200705192650901.png)

定时: 设置一个定时器,expire(设置了定时元素的存储空间,存储元素的地址值和过期时间)中的元素到达过期时间立刻删除

惰性: 当元素到达过期时间如果服务器压力过大不会立刻删除,等到在获取时再进行删除

定期: 每隔一段时间对内存中的数据进行随机抽查,把抽查到的过期数据删除



## 高级数据类型































